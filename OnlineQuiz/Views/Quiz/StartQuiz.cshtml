@model OnlineQuiz.Models.QuizViewModel

@{
    ViewData["Title"] = "StartQuiz";
}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="~/js/timer.js"></script>
@section Scripts{
    @{
        await Html.RenderPartialAsync("_QuizScriptsPartial", Model);
    }
}
<div id="countdown"></div>
<hr />
<h1 class="accordion-header">@Model.QuizName</h1>

<form id="quizForm" action="submitquiz" method="post" class="form-control">
    
    <div class="d-flex justify-content-center">
        <div class="nav nav-pills">
            @for (int i = 0; i < Model.Questions.Count; i++)
            {
                <a id="Navquestion@(i)" class="nav-link" href="#question@(i)">Question @(i + 1)</a>
            }
        </div>
        
    </div>
    <input type="hidden" id="currentQuestionIndex" name="currentQuestionIndex" value="0">
    <input type="hidden" id="totalQuestions" name="totalQuestions" value="@Model.Questions.Count">
    <div>
        @for (int i = 0; i < Model.Questions.Count; i++)
        {
            <div id="question@(i)"
            style="display: @(i == Model.CurrentQuestionIndex ? "" : "none")">
                <h4>Question @(i + 1)</h4>
                <hr />
                <p>@(i + 1). @Model.Questions[i].QuestionText</p>
                <input asp-for=@Model.Questions[i].QuestionId type="hidden" />
                @foreach (var option in @Model.Options.Where(x => x.QuestionId == @Model.Questions[i].QuestionId))
                {
                    <dl class="row" style="display: flex; flex-wrap: nowrap;">
                        <dd class="col-sm-12 float-left">
                            <input type="radio" name="selectedOptionId_@(i)" value="@option.OptionId"
                        id="option@(option.OptionId)">
                            <label for="option@(option.OptionId)">@option.OptionText</label>
                        </dd>
                    </dl>
                }

        </div>
        }
    </div>




    <div class="d-flex">
        <button id="previous-button" type="button"
            class="btn btn-primary align-content-center mr-auto">Previous</button>
        <button id="next-button" type="button" class="btn btn-primary align-content-center mr-auto">Next</button>
        <button id="submit" method="post" asp-action="SubmitQuiz" asp-controller="Quiz"
            class="btn btn-outline-warning ml-auto">Submit</button>
    </div>

    <div>@Html.AntiForgeryToken()</div>
</form>